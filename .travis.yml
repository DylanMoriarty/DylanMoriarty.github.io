language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: Q4i19aZ8RkcSFbdz9RlWATB8eW80YhdJIM9E/G6ENZ1S8/nNC6C24faJZL1uVuVV4x8LbvL44vGV5ROS/4PpyKVnufVi6iNie04XbGNMfdW7Wo4qixwIbUA0pHvuJ0+hS0qf0Y0VccEXUI80kPYYpY4PP3edOFq4Ecr4rLHZPoxgOPayzF0qRa4hpULqNUiJT84xuOqz0ZQuF6P5bimoEDl/Rw1J94BMtZRa2ubrkCwRe2Bj7GNKSYePQoRH2OSJlvdY05ezq9pgMRct/9dOfM0aN2VS+UDtMrAqRPh8fFRZXWlb2QzAtHkfq9XeJziiAKgE4L+22/BaNk/eYebCczRDtLWNSfLZeXn3v28n3waH7RIvZSaWZspY6M4ulRQWUXfjUzUnkisteVz7gAeAv0oItxnW2wEja0qLVUAj2y1Manq4s+P86uIbok5MlTV9BF9QetkLgfw3y02p9s23tnGoYksN80YLQQ+2jH++fevfUeVQv8brkFDRfFsgek/nutc96WFwJyQa4kv6zitBAIOXLz2OE0iwqe/sx/XN1dOylovORHoTx/a080xGKh+9NzrJ0COuxcjNGDge40uDh8vf8Xnnb7Pr2XelSpEjBY2cVywVyjXHKmIqx9Kc9qv5YOyn9IQzTQBghbZ9vSZHs1pu4Jdjyzpsl8sP0SI+my0=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.1
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
