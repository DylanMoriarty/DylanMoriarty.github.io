language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: ZLoI+QcFjt1XwyQ/5sByxgF9psSPaRB5xX24m2j2SwImOeHiWvG1jEWa+hUEzDIYaGd3rgnDugWDqIszRCBErZAvGZONjuIHTDPcE+lgjMC6hAo3fmudT3lZUrWQMuzaaEPTovfKCRYtab87YdL0/ssLDLExUX6JXK5IFrBrF931Fr+kkDzKT2mNqj/xgcsLPW3YIMWM0QBpryeNld9rR/Z9gnFm5xKqUqbozuAeMinrAPJEKadr1BsRb5vOvJd4rhAHXYKTV73zgVHxhEMGMfxPRUuxBYaYVa4YjUzDelgWPJ9Vy+/Z7JBR+3FoJjaSQsOlYdKsu/wqs7ODsmn5pfGIhDpg1jBQ00gOUsMGITEDOkLrTNdioZIUF79L/JIB5T3AFmxx1LDeDISg5TbPMPcUbBjVVbV/wb5r+cFnPQ4oa9IyFp5MU16+PHnInnvGW2Inp78dUspBpCm3OvrZ5QLyCOS42zBcrLO4ZPl7XEsYxoqiyGaVxfLbW8kOrCE66jEkVyes64Bjl1J2I7Yp8EfsZqlg5y8VY7AE1vQPUv4dNM+h5UmSpSbdiGSjof7gtl19JnQLi1aX3cRFsLRPM16uJSZxQuLIis3HnjHLHWqIdCoF1O5SXyl9F6BA2X1klZ5TsV2JowSpmi+6/5+XrZXEi0SoVBS3iKnk3/qWbt4=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.1
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
