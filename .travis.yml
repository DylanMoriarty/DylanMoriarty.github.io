language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: KBB45mRnLj0adF0bS/RIUFualL79Ybvdlyz/SZHO8aHwoVPmmr4uS44hz7uHDD0QZ8IY1TFVm9Qgm7pM8jQaVrEkv2XaaUNd3WJkuWWHab6qk8K1jAOA1Yvv40sD51ogCpcHfHw4reTECNGfH+zVR8YDLtCYcT4p2V3OewiK/8jNFl7wgocYLV7jrguKETdeBY9tbDXSTC6l0geaBUUyrpzpGptCMAAsXn2r0wOXVboVVmls5xqSCuPdKMCZbWL7NkbjCmZjRJY+VAqXZBD4lqeklxKjs1RA15tuSv4fYHMton7Qod7Zx3dmAPkn+2h2em7CMBJ3G08ti9W4OAOsPQMRZCGzDkpr9t+GsH4cXmzBV/l2ajOAp+kFP9LOJSMcOhOFJdSMwqQ39FfWdGOrePo2wNgzLMndVcSxmyM2C9YglXBe7maNBL6knAkayn3tUav8dDfPp1EMFi6qx56edlwonxnV3T3tH1dO8iiL26Hxx1dJDr/ByNW7pT+W4j0U9MT130HF964anCx/QuBc1k7bjWxSnP+bCb5dZDBxNHDqzKym7l2jTRSn+/BQ8Wpitxep+Jj8oiY1nGemvGz+KCxRF8OsvYgg1q7trgZiS2o3WO2dJRfPRtK9+URk3QKZABvHPAldQ2wzmJBK2Q11lnOtvZEjnUai9+EgbT0sft0=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.1
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
