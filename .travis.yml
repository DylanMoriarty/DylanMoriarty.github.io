language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: KZUD6fqNjtS5f2pXsQZs8NXIIj4hye7B9n9y9QJVn37ADztjQ4Jd/39NiDqF5uS2Z0ASFeIasWYPA/2sB8j65sNxC4lt5MSJW7lcifpov+WH5BY3hIFMguPEJStJ9RT+xyhIW51aPjdlWcaN/f24BlJhvYn1RDuHPVjqV2CmstX3DgXut/rw2nsCA4OthDPRelrPngZqFQqPVqBuOFtRnz6KfnpDGY0sxB3Rb0vP7NQeIqDkRnxMijL5a3X4t//NhNBcmKl0JHcV61uNuNwoLV1+KGA63qFOk/Yy3aKKu2CIkk+a293M1eHdj3Cg4ce3pnRGNCo4u0B2vJy0eWaHO3FiTPtmDdfD0le0L9uOQ3/bbTTh+PvAzlPX1VrFPV55BOgzVmptSCcjCgX8BF+ujkGL+k5u8ftaGxzIQ3BZS+YjLWia1RHqCGtb2yaLzWjwpNV3pIwmnZAOd0VUdaUEcVK5w+zujZA6iO8UmTwjJStyi3sjTZ3dJPYPeuVTm7ZvKsHmQxvJBD9wemQX8d4AYe6CP01Hl2YgW9ClnfuUkL7t416A+I6tFFlDD1TkAZ2Ko+DfOehVrQ0HUUMm3Ev4o8EUbWa5mPwdGujNbOhUbqXB1KcfW4sHn2Qg5u6er+4orR8+WNMd/grLXjAbCvKMsh1YBLJ9LwPGn1NUg6b5vTA=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.1
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
