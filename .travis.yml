language: node_js
node_js:
- '4'
env:
  global:
  - CXX=g++-4.8
  - DEPLOY_BRANCH=develop
  - secure: 04+34EyDzdnD+YhCd23sSvOiqRpp3CZUXq1gEdqdypeT60hjwcoDUYc/pPnNQgPvE3bMNqN8jwNPNoQsC3nWIKP9iT6ZJfzqfC/pDkkqaTBYKzFbcHwiDqROCT18Zw8kYdrl7KcXxwf037MwCzO8e9CRXSKeBJjX6xBoc0g6xyhPjAA7SV2gbqp1tEBAvKqGxPWQRihb5cWfAXgs+yCEbf/MiFHHxodM0+C4kpeYLIo7VbZWtJKoXwYD1C4GNJJr5DR/xzrV7a10cBztmWgSDBG2SQuM2GoCmTh18DR40YvsdFp5mJbPT/TlggSyOwIWm9Rftn9CCEzxphNOVLTB3hb7DLRyHQigexR0PfBz2Fs3p7j9GWiJ3b+3Tdv66R3zPkMJ9vbmHCxehDIT0rKRHGJAoxntTcWv0ASMKfTai5uIZH5GzoO+0DQ7BbbRR3+OfJeG6cZ+4x2B66CnG2DNVfVzZZ9feMYp984Fgrkq8vGFfbIsL+4hgy/hRqrTzxmsfBzNi/wl0sk9R6NSbY09lx8r2D8OA7LlFNGnszxPvaIREU3FdOIiHt1/gPkgSEEl23V9n+mU9Eq5I3j3AxWMuNCt56HZz+/PtImZoisNc9dGw0gtuHemrUBLWRnfaWnVwQECsYljSdVKFvBgUxdSfTS6y9gUbboV5xWJ6xViplU=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - bundle/cache
before_install:
- rvm install 2.1
- chmod +x ./.build_scripts/deploy.sh
- chmod +x ./.build_scripts/lint.sh
before_script:
- "./.build_scripts/lint.sh"
- npm test
script:
- npm run build
deploy:
  provider: script
  skip_cleanup: true
  script: ".build_scripts/deploy.sh"
  on:
    branch: "${DEPLOY_BRANCH}"
